<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>UdS Fahrplan Bot Development Log (4) -- Implementation on /sethome and /home function - GreenMeeple</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#3273dc"><meta name="application-name" content="GreenMeeple"><meta name="msapplication-TileImage" content="/img/avatar.png"><meta name="msapplication-TileColor" content="#3273dc"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="GreenMeeple"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="72x72" href="/img/avatar.png"><link rel="apple-touch-icon" sizes="96x96" href="/img/avatar.png"><link rel="apple-touch-icon" sizes="128x128" href="/img/avatar.png"><link rel="apple-touch-icon" sizes="256x256" href="/img/avatar.png"><meta name="description" content="This blog post is trying to tell you:  How to build your own telegram bot Detailed explanations on the implementation of udsfahrbot   Previous post: UdS Fahrplan Bot Development Log (3) ‚Äì Implementat"><meta property="og:type" content="blog"><meta property="og:title" content="UdS Fahrplan Bot Development Log (4) -- Implementation on /sethome and /home function"><meta property="og:url" content="https://greenmeeple.github.io/projects/udsfahrplan-log4/"><meta property="og:site_name" content="GreenMeeple"><meta property="og:description" content="This blog post is trying to tell you:  How to build your own telegram bot Detailed explanations on the implementation of udsfahrbot   Previous post: UdS Fahrplan Bot Development Log (3) ‚Äì Implementat"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://greenmeeple.github.io/images/udsfahrplan/udsfahrplan_cover.png"><meta property="article:published_time" content="2025-04-29T23:04:55.000Z"><meta property="article:modified_time" content="2025-05-13T01:48:24.227Z"><meta property="article:author" content="Alex Li"><meta property="article:tag" content="Python"><meta property="article:tag" content="Telegram"><meta property="article:tag" content="HAFAS"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://greenmeeple.github.io/images/udsfahrplan/udsfahrplan_cover.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://greenmeeple.github.io/projects/udsfahrplan-log4/"},"headline":"UdS Fahrplan Bot Development Log (4) -- Implementation on /sethome and /home function","image":["https://greenmeeple.github.io/images/udsfahrplan/udsfahrplan_cover.png"],"datePublished":"2025-04-29T23:04:55.000Z","dateModified":"2025-05-13T01:48:24.227Z","author":{"@type":"Person","name":"Alex Li"},"publisher":{"@type":"Organization","name":"GreenMeeple","logo":{"@type":"ImageObject","url":"https://greenmeeple.github.io/img/logo.png"}},"description":"This blog post is trying to tell you:  How to build your own telegram bot Detailed explanations on the implementation of udsfahrbot   Previous post: UdS Fahrplan Bot Development Log (3) ‚Äì Implementat"}</script><link rel="canonical" href="https://greenmeeple.github.io/projects/udsfahrplan-log4/"><link rel="alternate" href="/atom.xml" title="GreenMeeple" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@100..900&amp;display=swap"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-5112876356744847" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="GreenMeeple" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Personal Note" href="https://greenmeeple.github.io/notes"><i class="fa-solid fa-book"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Personal Blog" href="https://greenmeeple.github.io/SharkDeer"><i class="fa-solid fa-solid fa-blog"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/images/udsfahrplan/udsfahrplan_cover.png" alt="UdS Fahrplan Bot Development Log (4) -- Implementation on /sethome and /home function"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-04-29T23:04:55.000Z" title="30/04/2025, 01:04:55">2025-04-30</time></span><span class="level-item"><a class="link-muted" href="/categories/Projects/">Projects</a></span><span class="level-item">9 minutes to read (About 1295 words)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><h1 class="title is-3 is-size-4-mobile">UdS Fahrplan Bot Development Log (4) -- Implementation on /sethome and /home function</h1><div class="content"><blockquote>
<p><strong>This blog post is trying to tell you:</strong></p>
<ul>
<li>How to build your own telegram bot</li>
<li>Detailed explanations on the implementation of <strong><a target="_blank" rel="noopener" href="https://t.me/udsfahrbot">udsfahrbot</a></strong></li>
</ul>
</blockquote>
<p>Previous post: <a href="../udsfahrplan-log3">UdS Fahrplan Bot Development Log (3) ‚Äì Implementation on &#x2F;trip and &#x2F;depart function</a></p>
<h2 id="Brief-Walkthrough-on-Telegram-Bot-Cont"><a href="#Brief-Walkthrough-on-Telegram-Bot-Cont" class="headerlink" title="Brief Walkthrough on Telegram Bot (Cont.)"></a>Brief Walkthrough on Telegram Bot (Cont.)</h2><p>In the previous notes, we‚Äôve already implemented <code>/trip</code> and <code>/depart</code> based on <a href="../udsfahrplan-log1">this</a>. Now, let‚Äôs start explaining them one by one.</p>
<p>We also have another study notes for all of the telegram bot projects in <a href="../../python/tgbot">here</a>, it gives you the basics on how to create your own bot and further descriptions on different functions and attributes on the package  <strong><a target="_blank" rel="noopener" href="https://python-telegram-bot.org/">python-telegram-bot</a></strong>.</p>
<h2 id="sethome-‚Äì-Storing-users‚Äô-starting-station"><a href="#sethome-‚Äì-Storing-users‚Äô-starting-station" class="headerlink" title="&#x2F;sethome ‚Äì Storing users‚Äô starting station"></a>&#x2F;sethome ‚Äì Storing users‚Äô starting station</h2><p>Similarly, our main function should have <code>app.add_handler(CommandHandler(&quot;sethome&quot;, spawn))</code> and <code>InlineKeyboardMarkup[]</code> ready, these components are defined in previous notes and they are reusable.</p>
<p>Next, our function has to be able to distinguish different users. Users who interact with the bot using <strong>command</strong> or <strong>tagged message</strong> will have their id stored in <code>message.from_user.id</code>; and <code>query.from_user.id</code> if users are interacting using <strong>buttons</strong>.</p>
<p>Then, we also need to create a database or storage file to read and write users‚Äô stations. We decide the tool to use based on our use case and needs. Here, the data we need to store are <code>user_id</code>, <code>station_name</code>, and <code>station_id</code>. Which the columns are stable and small size. Therefore, it can be handled by a simple JSON file. Before we store the station, remember to check if the user already stored any station before to avoid creating duplicates.</p>
<figure class="highlight python"><figcaption><span>bot_spawn.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_spawn_start</span>(<span class="hljs-params">query, context, data</span>):<br>    station = locations[data] <span class="hljs-keyword">if</span> data <span class="hljs-keyword">in</span> locations <span class="hljs-keyword">else</span> data<br>    name = context.user_data.get(<span class="hljs-string">&quot;spawn_session&quot;</span>, &#123;&#125;).get(<span class="hljs-string">&quot;search_s&quot;</span>, &#123;&#125;).get(data, data)<br>    user_id = query.from_user.<span class="hljs-built_in">id</span><br><br>    <span class="hljs-keyword">if</span> os.path.exists(SPAWN_DATA):<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(SPAWN_DATA, <span class="hljs-string">&quot;r&quot;</span>) <span class="hljs-keyword">as</span> file:<br>            <span class="hljs-keyword">try</span>:<br>                data_list = json.load(file)<br>            <span class="hljs-keyword">except</span> json.JSONDecodeError:<br>                data_list = []<br>    <span class="hljs-keyword">else</span>:<br>        data_list = []<br><br>    <span class="hljs-comment"># Check if user already exists</span><br>    user_found = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> data_list:<br>        <span class="hljs-keyword">if</span> entry[<span class="hljs-string">&quot;user_id&quot;</span>] == user_id:<br>            entry[<span class="hljs-string">&quot;home_id&quot;</span>] = station<br>            entry[<span class="hljs-string">&quot;home_name&quot;</span>] = name<br>            user_found = <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">break</span><br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user_found:<br>        <span class="hljs-comment"># Add new user entry</span><br>        data_list.append(&#123;<span class="hljs-string">&quot;user_id&quot;</span>: user_id, <span class="hljs-string">&quot;home_id&quot;</span>: station, <span class="hljs-string">&quot;home_name&quot;</span>: name&#125;)<br><br>    <span class="hljs-comment"># Save updated data</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(SPAWN_DATA, <span class="hljs-string">&quot;w&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        json.dump(data_list, file, indent=<span class="hljs-number">2</span>)<br><br>    <span class="hljs-keyword">await</span> query.edit_message_text(<br>        <span class="hljs-string">f&quot;‚úÖ User <span class="hljs-subst">&#123;user_id&#125;</span>, your home is set to <span class="hljs-subst">&#123;name:&lt;<span class="hljs-number">20</span>&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">spawn</span>(<span class="hljs-params">update: Update, context: ContextTypes.DEFAULT_TYPE</span>):<br>    context.user_data[<span class="hljs-string">&quot;spawn_session&quot;</span>] = &#123;&#125;<br>    <span class="hljs-keyword">await</span> update.message.reply_text(<span class="hljs-string">f&quot;Hello User <span class="hljs-subst">&#123;update.message.from_user.<span class="hljs-built_in">id</span>&#125;</span>, Set your spawn point&quot;</span>,<br>        reply_markup=build_location_keyboard(<span class="hljs-string">&quot;spawn&quot;</span>,<span class="hljs-string">&quot;start&quot;</span>)<br>    )<br></code></pre></td></tr></table></figure>

<h2 id="home-‚Äì-A-quick-version-of-trip-for-frequent-repetitive-usage"><a href="#home-‚Äì-A-quick-version-of-trip-for-frequent-repetitive-usage" class="headerlink" title="&#x2F;home ‚Äì A quick version of &#x2F;trip for frequent, repetitive usage"></a>&#x2F;home ‚Äì A quick version of &#x2F;trip for frequent, repetitive usage</h2><p>Now we are gonna implement our <code>/home</code> command. We have all the components need from our previous work. All we need is to recombulate them and make sure we create a new type of session, <code>context.user_data[&quot;home_session&quot;]</code>. Basically, <code>/home</code> is <code>/trip</code> without setting the destination, but directly retrieve it from the database created by <code>/sethome</code>. Also, to enhance user experience, if a user call <code>/home</code> without setting any destination stations in prior, jump to the <code>/sethome</code> workflow before moving on.</p>
<figure class="highlight python"><figcaption><span>bot_home.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_home_start</span>(<span class="hljs-params">query, context, data</span>):<br>    start = locations[data] <span class="hljs-keyword">if</span> data <span class="hljs-keyword">in</span> locations <span class="hljs-keyword">else</span> data<br>    context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>][<span class="hljs-string">&quot;start&quot;</span>] = context.user_data.get(<span class="hljs-string">&quot;home_session&quot;</span>, &#123;&#125;).get(<span class="hljs-string">&quot;search_s&quot;</span>, &#123;&#125;).get(data, data)<br><br>    user_id = query.from_user.<span class="hljs-built_in">id</span><br><br>    <span class="hljs-keyword">if</span> os.path.exists(SPAWN_DATA):<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(SPAWN_DATA, <span class="hljs-string">&quot;r&quot;</span>) <span class="hljs-keyword">as</span> file:<br>            <span class="hljs-keyword">try</span>:<br>                data_list = json.load(file)<br>            <span class="hljs-keyword">except</span> json.JSONDecodeError:<br>                data_list = []<br>    <span class="hljs-keyword">else</span>:<br>        data_list = []<br><br>    <span class="hljs-comment"># Check if user already exists</span><br>    user_found = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> data_list:<br>        <span class="hljs-keyword">if</span> entry[<span class="hljs-string">&quot;user_id&quot;</span>] == user_id:<br>            dest = entry[<span class="hljs-string">&quot;home_id&quot;</span>]<br>            context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>][<span class="hljs-string">&quot;dest&quot;</span>] = entry[<span class="hljs-string">&quot;home_name&quot;</span>]<br>            user_found = <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user_found:<br>        <span class="hljs-keyword">await</span> query.edit_message_text(<span class="hljs-string">f&quot;Hello User <span class="hljs-subst">&#123;user_id&#125;</span>, You haven&#x27;t set your home station.&quot;</span>,<br>            reply_markup=build_location_keyboard(<span class="hljs-string">&quot;spawn&quot;</span>,<span class="hljs-string">&quot;start&quot;</span>))<br><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">await</span> query.edit_message_text(<span class="hljs-string">f&quot;üîç Finding trips from <span class="hljs-subst">&#123;context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>][<span class="hljs-string">&quot;start&quot;</span>]&#125;</span> to <span class="hljs-subst">&#123;context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>][<span class="hljs-string">&quot;dest&quot;</span>]&#125;</span>...&quot;</span>)<br>        context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>][<span class="hljs-string">&quot;trip&quot;</span>] = get_trips(<span class="hljs-string">&quot;saarvv&quot;</span>, start, dest, <span class="hljs-number">0</span>)<br>        trip_basic=parse_trips_basic(context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>][<span class="hljs-string">&quot;trip&quot;</span>], context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>][<span class="hljs-string">&quot;start&quot;</span>], context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>][<span class="hljs-string">&quot;dest&quot;</span>])<br>        <br>        <span class="hljs-keyword">if</span> trip_basic <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            btn_retry = InlineKeyboardMarkup([[InlineKeyboardButton(<span class="hljs-string">&quot;again&quot;</span>, callback_data=<span class="hljs-string">&quot;home:details:again&quot;</span>)]])<br>            <span class="hljs-keyword">await</span> query.edit_message_text(<span class="hljs-string">&quot;‚ùå No trips found. Try again.&quot;</span>, reply_markup=btn_retry)<br>        <span class="hljs-keyword">else</span>:<br>            btn_details = InlineKeyboardMarkup([[InlineKeyboardButton(<span class="hljs-string">&quot;details&quot;</span>, callback_data=<span class="hljs-string">&quot;home:details:show&quot;</span>)]])<br>            <span class="hljs-keyword">await</span> query.edit_message_text(text=trip_basic, reply_markup=btn_details)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_home_details</span>(<span class="hljs-params">query, context, data</span>):<br>    <span class="hljs-keyword">if</span> data == <span class="hljs-string">&quot;again&quot;</span>:<br>        context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>].clear()<br>        <span class="hljs-keyword">await</span> query.edit_message_text(<span class="hljs-string">&quot;üöå Where do you want to start your journey?&quot;</span>,<br>                                      reply_markup=build_location_keyboard(<span class="hljs-string">&quot;home&quot;</span>,<span class="hljs-string">&quot;start&quot;</span>))<br>    <span class="hljs-keyword">else</span>:<br>        trip = context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>].get(<span class="hljs-string">&quot;trip&quot;</span>)<br>        context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>].clear()<br>        <span class="hljs-keyword">await</span> query.edit_message_text(text=parse_trips_detail(trip,context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>][<span class="hljs-string">&quot;start&quot;</span>], context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>][<span class="hljs-string">&quot;dest&quot;</span>]))<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">home</span>(<span class="hljs-params">update: Update, context: ContextTypes.DEFAULT_TYPE</span>):<br>    context.user_data[<span class="hljs-string">&quot;home_session&quot;</span>] = &#123;&#125;<br>    user_id = update.message.from_user.<span class="hljs-built_in">id</span><br><br>    <span class="hljs-keyword">if</span> os.path.exists(SPAWN_DATA):<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(SPAWN_DATA, <span class="hljs-string">&quot;r&quot;</span>) <span class="hljs-keyword">as</span> file:<br>            <span class="hljs-keyword">try</span>:<br>                data_list = json.load(file)<br>            <span class="hljs-keyword">except</span> json.JSONDecodeError:<br>                data_list = []<br>    <span class="hljs-keyword">else</span>:<br>        data_list = []<br><br>    <span class="hljs-comment"># Check if user already exists</span><br>    user_found = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">for</span> entry <span class="hljs-keyword">in</span> data_list:<br>        <span class="hljs-keyword">if</span> entry[<span class="hljs-string">&quot;user_id&quot;</span>] == user_id:<br>            user_found = <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">break</span><br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user_found:<br>        <span class="hljs-keyword">await</span> update.message.reply_text(<span class="hljs-string">f&quot;Hello User <span class="hljs-subst">&#123;user_id&#125;</span>, You haven&#x27;t set your home station.&quot;</span>,<br>            reply_markup=build_location_keyboard(<span class="hljs-string">&quot;spawn&quot;</span>,<span class="hljs-string">&quot;start&quot;</span>))<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">await</span> update.message.reply_text(<span class="hljs-string">f&quot;Hello User <span class="hljs-subst">&#123;user_id&#125;</span>, Where are you right now?&quot;</span>,<br>            reply_markup=build_location_keyboard(<span class="hljs-string">&quot;home&quot;</span>,<span class="hljs-string">&quot;start&quot;</span>))<br></code></pre></td></tr></table></figure>

<h2 id="Advanced-Database-Encryption"><a href="#Advanced-Database-Encryption" class="headerlink" title="Advanced: Database Encryption"></a>Advanced: Database Encryption</h2><p>As a Cybersecurity student, it seems to be a little be ‚Äúsus‚Äù to simply use JSON‚Ä¶ Currently our user base is within the people we know, which is totally fine becaue of trust. But if the user base has expanded beyond that, server side of the telegram bot can see everyone‚Äôs station, or more precisely, we can even know where a user live!</p>
<p>In general, there‚Äôs no way but trust in this situation, because evey function is implemented by the server&#x2F;provider (me) and we can always log the data because any operations. So even it is encrypted and no other users can check, the server holder can still retrieve at some point. Unless the data is already encrypted before sending (<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/End-to-end_encryption">E2EE</a>).</p>
<p>Another way to guarantee the trust here, is that 1. The whole bot is opensource, and 2. A third party&#x2F;person has verify the running bot is indeed same as the code in the repository online.</p>
<h2 id="Quick-Summary"><a href="#Quick-Summary" class="headerlink" title="Quick Summary"></a>Quick Summary</h2><p>We talked about the methodology behind <code>/sethome</code> and <code>/home</code> and the security concern when deploying our product to a larger user base. However, there are some extra work we haven‚Äôt covered yet. For example, what are the <code>session</code> being useful in our design, what exactly are our HTTP request and where are they come from?</p>
<p>Continue Reading: <a href="../udsfahrplan-log5">UdS Fahrplan Bot Development Log (5) ‚Äì Explanations on bot sessions and requests</a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/public-transport/hafas-client">hafas-client</a></li>
<li><a target="_blank" rel="noopener" href="https://int.bahn.de/en">Deutsche Bahn</a></li>
<li><a target="_blank" rel="noopener" href="https://www.saarfahrplan.de/">SaarFahrplan</a></li>
<li><a target="_blank" rel="noopener" href="https://www.mobiliteit.lu/en/">Mobiliteit.lu</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Felix3qH4/Mobiliteit.lu">Mobiliteit.lu (Github Repo)</a></li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>UdS Fahrplan Bot Development Log (4) -- Implementation on /sethome and /home function</p><p><a href="https://greenmeeple.github.io/projects/udsfahrplan-log4/">https://greenmeeple.github.io/projects/udsfahrplan-log4/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Alex Li</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2025-04-30</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2025-05-13</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Python/">Python</a><a class="link-muted mr-2" rel="tag" href="/tags/Telegram/">Telegram</a><a class="link-muted mr-2" rel="tag" href="/tags/HAFAS/">HAFAS</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=67edf3b1bc16930012085bcb&amp;product=sop" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">If you hate me, try to keep me alive for longer torment.</h3><div class="buttons is-centered"><a class="button donate" href="https://buymeacoffee.com/greenmeeple" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Prolong my pain</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/projects/hafas-bitmask-calculator/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">HAFAS Bitmask Calculator</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/projects/udsfahrplan-log3/"><span class="level-item">UdS Fahrplan Bot Development Log (3) -- Implementation on /trip and /Depart function</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card" id="comments"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "8d63ce1959e7a962773643ff2238f084",
            repo: "GreenMeeple.github.io",
            owner: "GreenMeeple",
            clientID: "Ov23ctDlN8NQWlBnA3I9",
            clientSecret: "3fd5f43f975857c90bf68212b56bd6a2aaeff520",
            admin: ["GreenMeeple"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "en",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Brief-Walkthrough-on-Telegram-Bot-Cont"><span class="level-left"><span class="level-item">1</span><span class="level-item">Brief Walkthrough on Telegram Bot (Cont.)</span></span></a></li><li><a class="level is-mobile" href="#sethome-‚Äì-Storing-users‚Äô-starting-station"><span class="level-left"><span class="level-item">2</span><span class="level-item">/sethome ‚Äì Storing users‚Äô starting station</span></span></a></li><li><a class="level is-mobile" href="#home-‚Äì-A-quick-version-of-trip-for-frequent-repetitive-usage"><span class="level-left"><span class="level-item">3</span><span class="level-item">/home ‚Äì A quick version of /trip for frequent, repetitive usage</span></span></a></li><li><a class="level is-mobile" href="#Advanced-Database-Encryption"><span class="level-left"><span class="level-item">4</span><span class="level-item">Advanced: Database Encryption</span></span></a></li><li><a class="level is-mobile" href="#Quick-Summary"><span class="level-left"><span class="level-item">5</span><span class="level-item">Quick Summary</span></span></a></li><li><a class="level is-mobile" href="#Reference"><span class="level-left"><span class="level-item">6</span><span class="level-item">Reference</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><figure class="media-left"><a class="image" href="/python/tgbot/"><img src="/images/tgbot/tgbot_thumbnail.png" alt="python-telegram-bot development experience and notes"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-08T13:03:35.000Z">2025-05-08</time></p><p class="title"><a href="/python/tgbot/">python-telegram-bot development experience and notes</a></p><p class="categories"><a href="/categories/Python/">Python</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/projects/udsfahrplan-bot/"><img src="/images/udsfahrplan/udsfahrplan_thumbnail.png" alt="UdS Fahrplan Bot"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-08T12:04:55.000Z">2025-05-08</time></p><p class="title"><a href="/projects/udsfahrplan-bot/">UdS Fahrplan Bot</a></p><p class="categories"><a href="/categories/Projects/">Projects</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/projects/mensaar/"><img src="/images/mensaar/mensaar_thumbnail.png" alt="üçΩ ü•® MensaarLecker -- A beloved tool to find out Mensa Ladies&#039; favourite menu using Seleniumü•® üçΩ"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-08T03:03:35.000Z">2025-05-08</time></p><p class="title"><a href="/projects/mensaar/">üçΩ ü•® MensaarLecker -- A beloved tool to find out Mensa Ladies&#039; favourite menu using Seleniumü•® üçΩ</a></p><p class="categories"><a href="/categories/Projects/">Projects</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/projects/mensaar-log3/"><img src="/images/mensaar/mensaar_thumbnail.png" alt="MensaarLecker Development Log (3) -- Telegram Bot Deployment and Integration"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-07T13:03:35.000Z">2025-05-07</time></p><p class="title"><a href="/projects/mensaar-log3/">MensaarLecker Development Log (3) -- Telegram Bot Deployment and Integration</a></p><p class="categories"><a href="/categories/Projects/">Projects</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/projects/udsfahrplan-log5/"><img src="/images/udsfahrplan/udsfahrplan_thumbnail.png" alt="UdS Fahrplan Bot Development Log (5) -- Explanations on bot sessions and requests"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-02T23:04:55.000Z">2025-05-03</time></p><p class="title"><a href="/projects/udsfahrplan-log5/">UdS Fahrplan Bot Development Log (5) -- Explanations on bot sessions and requests</a></p><p class="categories"><a href="/categories/Projects/">Projects</a></p></div></article></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Appium/"><span class="level-start"><span class="level-item">Appium</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Git/"><span class="level-start"><span class="level-item">Git</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JavaScript/"><span class="level-start"><span class="level-item">JavaScript</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Notes/"><span class="level-start"><span class="level-item">Notes</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Projects/"><span class="level-start"><span class="level-item">Projects</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/SiteNote/"><span class="level-start"><span class="level-item">SiteNote</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2025/05/"><span class="level-start"><span class="level-item">May 2025</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/04/"><span class="level-start"><span class="level-item">April 2025</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/03/"><span class="level-start"><span class="level-item">March 2025</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/01/"><span class="level-start"><span class="level-item">January 2025</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/12/"><span class="level-start"><span class="level-item">December 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/10/"><span class="level-start"><span class="level-item">October 2024</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/App-Testing/"><span class="tag">App Testing</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Appium/"><span class="tag">Appium</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cantonese/"><span class="tag">Cantonese</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GitHub/"><span class="tag">GitHub</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HAFAS/"><span class="tag">HAFAS</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Latex/"><span class="tag">Latex</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LeetCode/"><span class="tag">LeetCode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mathjax/"><span class="tag">Mathjax</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Node-js/"><span class="tag">Node.js</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React/"><span class="tag">React</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Scraper/"><span class="tag">Scraper</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Selenium/"><span class="tag">Selenium</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Telegram/"><span class="tag">Telegram</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UdS/"><span class="tag">UdS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hafas/"><span class="tag">hafas</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/json/"><span class="tag">json</span><span class="tag">2</span></a></div></div></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">Advertisement</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5112876356744847" data-ad-slot="f08c47fec0942fa0" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="GreenMeeple" height="28"></a><p class="is-size-7"><span>&copy; 2025 Alex Li</span>¬†¬†Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>¬†&amp;¬†<a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Personal Note" href="https://greenmeeple.github.io/notes"><i class="fa-solid fa-book"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Personal Blog" href="https://greenmeeple.github.io/SharkDeer"><i class="fa-solid fa-solid fa-blog"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/lib/common.min.js" defer></script><script>
            document.addEventListener("DOMContentLoaded", function() {
                if (window.hljs) hljs.highlightAll();
            });
            </script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js"></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">√ó</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script src="/js/pjax.js"></script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">√ó</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>