<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>MensaarLecker Development Log (1) -- Web Crawling - GreenMeeple</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#3273dc"><meta name="application-name" content="GreenMeeple"><meta name="msapplication-TileImage" content="/img/avatar.png"><meta name="msapplication-TileColor" content="#3273dc"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="GreenMeeple"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="72x72" href="/img/avatar.png"><link rel="apple-touch-icon" sizes="96x96" href="/img/avatar.png"><link rel="apple-touch-icon" sizes="128x128" href="/img/avatar.png"><link rel="apple-touch-icon" sizes="256x256" href="/img/avatar.png"><meta name="description" content="This blog post is trying to tell you:  My personal experience when developing a web crawler using Selenium Explained with examples from my Repository: MensaarLecker   MotivationMe and my friends hate"><meta property="og:type" content="blog"><meta property="og:title" content="MensaarLecker Development Log (1) -- Web Crawling"><meta property="og:url" content="https://greenmeeple.github.io/projects/mensaar-log1/"><meta property="og:site_name" content="GreenMeeple"><meta property="og:description" content="This blog post is trying to tell you:  My personal experience when developing a web crawler using Selenium Explained with examples from my Repository: MensaarLecker   MotivationMe and my friends hate"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://greenmeeple.github.io/images/mensaar/mensaar_cover.png"><meta property="article:published_time" content="2025-03-20T04:03:35.000Z"><meta property="article:modified_time" content="2025-05-14T16:28:49.972Z"><meta property="article:author" content="Alex Li"><meta property="article:tag" content="Python"><meta property="article:tag" content="Scraper"><meta property="article:tag" content="Selenium"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://greenmeeple.github.io/images/mensaar/mensaar_cover.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://greenmeeple.github.io/projects/mensaar-log1/"},"headline":"MensaarLecker Development Log (1) -- Web Crawling","image":["https://greenmeeple.github.io/images/mensaar/mensaar_cover.png"],"datePublished":"2025-03-20T04:03:35.000Z","dateModified":"2025-05-14T16:28:49.972Z","author":{"@type":"Person","name":"Alex Li"},"publisher":{"@type":"Organization","name":"GreenMeeple","logo":{"@type":"ImageObject","url":"https://greenmeeple.github.io/img/logo.png"}},"description":"This blog post is trying to tell you:  My personal experience when developing a web crawler using Selenium Explained with examples from my Repository: MensaarLecker   MotivationMe and my friends hate"}</script><link rel="canonical" href="https://greenmeeple.github.io/projects/mensaar-log1/"><link rel="alternate" href="/atom.xml" title="GreenMeeple" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@100..900&amp;display=swap"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-5112876356744847" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="GreenMeeple" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Personal Note" href="https://greenmeeple.github.io/notes"><i class="fa-solid fa-book"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Personal Blog" href="https://greenmeeple.github.io/SharkDeer"><i class="fa-solid fa-solid fa-blog"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/images/mensaar/mensaar_cover.png" alt="MensaarLecker Development Log (1) -- Web Crawling"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-03-20T04:03:35.000Z" title="20/03/2025, 05:03:35">2025-03-20</time></span><span class="level-item"><a class="link-muted" href="/categories/Projects/">Projects</a></span><span class="level-item">7 minutes to read (About 1103 words)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><h1 class="title is-3 is-size-4-mobile">MensaarLecker Development Log (1) -- Web Crawling</h1><div class="content"><blockquote>
<p><strong>This blog post is trying to tell you:</strong></p>
<ul>
<li>My personal experience when developing a web crawler using <a target="_blank" rel="noopener" href="https://selenium-python.readthedocs.io/">Selenium</a></li>
<li>Explained with examples from my Repository: <a target="_blank" rel="noopener" href="https://github.com/greenmeeple/MensaarLecker">MensaarLecker</a></li>
</ul>
</blockquote>
<h2 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h2><p>Me and my friends <del>hate</del><strong>love</strong> the UdS Mensa so much! The infinite frozen food and french fries menus give us so much energy and motivation for the 5-hour afternoon coding marathon. However, no one actually knows how many potatoes they have exterminated throughout the week. We have a genius webpage created by some <a target="_blank" rel="noopener" href="https://gibtesheuteschnitzel.de/">Schnitzel lover</a>. Personally, I like its minimalistic layout and determination on Schnitzel searching.</p>
<blockquote>
<p>However, we want more.</p>
</blockquote>
<p>It’s not just Schnitzel; we want to know everything about their menu. We want to know what’s inside the mensa ladies’ brains when they design next week’s menu.</p>
<blockquote>
<p>The desire never ends. We need more data, more details, more, More, <strong>MORE!</strong></p>
</blockquote>
<h2 id="Developing-Process"><a href="#Developing-Process" class="headerlink" title="Developing Process"></a>Developing Process</h2><p>Our Goal here is simple:</p>
<ol>
<li><p>Scrape the Mensa menu every weekday and store it to Google Sheets</p>
</li>
<li><p>Fetch the Data Collection from Google Sheets and update the website</p>
</li>
</ol>
<h2 id="Web-Scraping"><a href="#Web-Scraping" class="headerlink" title="Web Scraping"></a>Web Scraping</h2><p>To collect the data, we can use Python libraries to simplfied the process. But the basic idea it the same: we try to find the pattern of the HTML tag and locate the desired data.</p>
<h3 id="Beautiful-Soup"><a href="#Beautiful-Soup" class="headerlink" title="Beautiful Soup"></a><a target="_blank" rel="noopener" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">Beautiful Soup</a></h3><p>I started my journey with Beautiful Soup, one of the most popular Python web scraper packages. However, as a Uni that is well-known for its computer science program, all the menus are rendered using JavaScript. And beautiful can only scrape HTML and XML tags. So the scraper can only see an empty skeleton page:</p>
<p><img src="/images/mensaar/mensaar_empty.png"></p>
<h3 id="Selenium"><a href="#Selenium" class="headerlink" title="Selenium"></a><a target="_blank" rel="noopener" href="https://selenium-python.readthedocs.io/">Selenium</a></h3><p>Basically, Selenium is a <a target="_blank" rel="noopener" href="https://www.selenium.dev/documentation/webdriver/">Webdriver</a> that opens a browser naturally, like a human user. Then from there we can scrape the rendered information. Things get simpler once we can see the website as we see it on the browser. We just need to find the tag that contains the information we need and save it for storage.</p>
<h3 id="Desired-Data-and-Tags"><a href="#Desired-Data-and-Tags" class="headerlink" title="Desired Data and Tags"></a>Desired Data and Tags</h3><table>
<thead>
<tr>
<th align="left">Data</th>
<th align="left">Tag</th>
</tr>
</thead>
<tbody><tr>
<td align="left">menus</td>
<td align="left"><code>&lt;div class=&quot;counter&quot;&gt;</code></td>
</tr>
<tr>
<td align="left">date</td>
<td align="left"><code>&lt;div class=&quot;cursor-pointer active list-group-item&quot;&gt;</code></td>
</tr>
<tr>
<td align="left">main dish</td>
<td align="left"><code>&lt;span class=&quot;meal-title&quot;&gt;</code></td>
</tr>
<tr>
<td align="left">side dish</td>
<td align="left"><code>&lt;div class=&quot;component&quot;&gt;</code></td>
</tr>
</tbody></table>
<p>The first part of the task is to get the daily menu. We also get the date on the website to make the following work easier.</p>
<p>By the <code>find_element</code> and <code>find_elements</code> functions in Selenium, we can create a simple scraper like this:</p>
<figure class="highlight python"><figcaption><span>scraper.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver<br><span class="hljs-keyword">from</span> selenium.webdriver.common.keys <span class="hljs-keyword">import</span> Keys<br><span class="hljs-keyword">from</span> selenium.webdriver.common.by <span class="hljs-keyword">import</span> By<br><br>driver = webdriver.Firefox()<br>driver.get(<span class="hljs-string">&quot;https://mensaar.de/#/menu/sb&quot;</span>)<br>counters = driver.find_elements(By.CLASS_NAME, <span class="hljs-string">&quot;counter&quot;</span>)<br><br><span class="hljs-keyword">for</span> counter <span class="hljs-keyword">in</span> counters:<br>    meal_title = meal.find_element(By.CLASS_NAME, <span class="hljs-string">&quot;meal-title&quot;</span>).text.strip()<br></code></pre></td></tr></table></figure>

<p>However, on the webpage there is also a counter called <code>Wahlessen.</code> Which refers to a more pricy and unpredictable menu, and we want to exclude its data:</p>
<figure class="highlight python"><figcaption><span>scraper.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">counter_title = counter.find_element(By.CLASS_NAME, <span class="hljs-string">&quot;counter-title&quot;</span>).text.strip()<br><br><span class="hljs-comment"># Filter for specified counter titles</span><br><span class="hljs-keyword">if</span> counter_title <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;Menü 1&quot;</span>, <span class="hljs-string">&quot;Menü 2&quot;</span>, <span class="hljs-string">&quot;Mensacafé&quot;</span>]:<br>    meal_title = meal.find_element(By.CLASS_NAME, <span class="hljs-string">&quot;meal-title&quot;</span>).text.strip()<br></code></pre></td></tr></table></figure>

<h3 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h3><p>In order to make the database easy to be accessed by other users&#x2F;students, we decided to deploy the data set to Google SpreadSheets.</p>
<figure class="highlight python"><figcaption><span>scraper.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">&quot;w&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>    json.dump(result, f, ensure_ascii=<span class="hljs-literal">False</span>, indent=<span class="hljs-number">2</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Results saved to <span class="hljs-subst">&#123;output_file&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># Save the updated occurrence counts to the JSON file</span><br>count_result = &#123;<br>    <span class="hljs-string">&quot;meal_counts&quot;</span>: <span class="hljs-built_in">dict</span>(meal_count),<br>    <span class="hljs-string">&quot;component_counts&quot;</span>: <span class="hljs-built_in">dict</span>(component_count)<br>&#125;<br><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(count_file, <span class="hljs-string">&quot;w&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>    json.dump(count_result, f, ensure_ascii=<span class="hljs-literal">False</span>, indent=<span class="hljs-number">2</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Counts saved to <span class="hljs-subst">&#123;count_file&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="Change-the-time-format"><a href="#Change-the-time-format" class="headerlink" title="Change the time format"></a>Change the time format</h3><p>Once we fetch data, you may notice that the website display the date in german format e.g. “Freitag, 21. März 2025”, which is not recognized by Google Sheets directly. So we need to make a function to convert them before uploading:</p>
<figure class="highlight python"><figcaption><span>scraper.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">GERMAN_MONTHS = &#123;<br>    <span class="hljs-string">&quot;Januar&quot;</span>: <span class="hljs-string">&quot;01&quot;</span>, <span class="hljs-string">&quot;Februar&quot;</span>: <span class="hljs-string">&quot;02&quot;</span>, <span class="hljs-string">&quot;März&quot;</span>: <span class="hljs-string">&quot;03&quot;</span>, <span class="hljs-string">&quot;April&quot;</span>: <span class="hljs-string">&quot;04&quot;</span>,<br>    <span class="hljs-string">&quot;Mai&quot;</span>: <span class="hljs-string">&quot;05&quot;</span>, <span class="hljs-string">&quot;Juni&quot;</span>: <span class="hljs-string">&quot;06&quot;</span>, <span class="hljs-string">&quot;Juli&quot;</span>: <span class="hljs-string">&quot;07&quot;</span>, <span class="hljs-string">&quot;August&quot;</span>: <span class="hljs-string">&quot;08&quot;</span>,<br>    <span class="hljs-string">&quot;September&quot;</span>: <span class="hljs-string">&quot;09&quot;</span>, <span class="hljs-string">&quot;Oktober&quot;</span>: <span class="hljs-string">&quot;10&quot;</span>, <span class="hljs-string">&quot;November&quot;</span>: <span class="hljs-string">&quot;11&quot;</span>, <span class="hljs-string">&quot;Dezember&quot;</span>: <span class="hljs-string">&quot;12&quot;</span><br>&#125;<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">format_date</span>(<span class="hljs-params">german_date</span>):<br>    <span class="hljs-keyword">match</span> = re.search(<span class="hljs-string">r&quot;(\d&#123;1,2&#125;)\. (\w+) (\d&#123;4&#125;)&quot;</span>, german_date)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:<br>        day, month, year = <span class="hljs-keyword">match</span>.groups()<br>        month_number = GERMAN_MONTHS.get(month, <span class="hljs-string">&quot;00&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;year&#125;</span>-<span class="hljs-subst">&#123;month_number&#125;</span>-<span class="hljs-subst">&#123;<span class="hljs-built_in">int</span>(day):02d&#125;</span>&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;0000-00-00&quot;</span><br></code></pre></td></tr></table></figure>

<h2 id="Upload-the-data-to-Google-Sheets"><a href="#Upload-the-data-to-Google-Sheets" class="headerlink" title="Upload the data to Google Sheets"></a>Upload the data to Google Sheets</h2><p>In order to interact with the Google Sheets, we need to use Google API. First, go to <a target="_blank" rel="noopener" href="https://console.cloud.google.com/">Google Cloud Console</a>.</p>
<p><img src="/images/mensaar/googleapi.png"></p>
<p>Create a new project. Next, go to <strong>API and Services</strong>, click <strong>Enable API and Services</strong></p>
<p><img src="/images/mensaar/apiservices.png"></p>
<p>Search <strong>Google Sheets API</strong>, select it and choose <strong>Enable</strong>。</p>
<p><img src="/images/mensaar/googlesheet.png"></p>
<p>Move <strong>Credentials</strong> from the sidebar, then choose <strong>Create credentials</strong> → <strong>Create service account</strong></p>
<p><img src="/images/mensaar/credentials.png"></p>
<p>In step 2, choose the role <strong>Editor</strong></p>
<p><img src="/images/mensaar/editor.png"></p>
<p>Now, when you come back to the <strong>Credentials</strong> page, you should see a newly generated email under <strong>Service Accounts</strong>, click it and select the tab <strong>Keys</strong></p>
<p><img src="/images/mensaar/key.png"></p>
<p>Select <strong>Create new key</strong>, choose <strong>JSON</strong> format, the file should start downloading automatically.</p>
<blockquote>
<p><strong><code>Important Notice</code></strong><br><code>This JSON file contains sensitive data, you should NEVER directly use it in your code, save it as an environment variable or save it as a secret on Github</code></p>
</blockquote>
<p><img src="/images/mensaar/secret.png"></p>
<p>With this key we can login the email we just created in <strong>Service Accounts</strong>, so that it is treated as a virtual users when running the script. Same as human users, in order to access the sheet we need to add this email as an editor in Google Sheets.</p>
<figure class="highlight python"><figcaption><span>scraper.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>    <span class="hljs-comment"># Read and validate credentials.json before using it</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(<span class="hljs-string">&quot;credentials.json&quot;</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;❌ credentials.json not found!&quot;</span>)<br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;credentials.json&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        raw_creds = f.read()<br>        creds_data = json.loads(raw_creds)<br><br>    <span class="hljs-comment"># Save to a temp file just in case gspread needs it as a file</span><br>    temp_path = <span class="hljs-string">&quot;parsed_credentials.json&quot;</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(temp_path, <span class="hljs-string">&quot;w&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        json.dump(creds_data, f)<br><br>    creds = ServiceAccountCredentials.from_json_keyfile_name(temp_path, scope)<br>    client = gspread.authorize(creds)<br>    sheet = client.<span class="hljs-built_in">open</span>(SHEET_NAME).sheet1<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;✅ Google Sheets Auth OK&quot;</span>)<br><br></code></pre></td></tr></table></figure>

<h2 id="End-of-Scraping"><a href="#End-of-Scraping" class="headerlink" title="End of Scraping"></a>End of Scraping</h2><p>Now we all set! Next, we need to display our collected results on web interfaces.</p>
<p>Continue Reading: <a href="../mensaarlog2">MensaarLecker Development Log (2) – Web Developing and GitHub Workflow</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>MensaarLecker Development Log (1) -- Web Crawling</p><p><a href="https://greenmeeple.github.io/projects/mensaar-log1/">https://greenmeeple.github.io/projects/mensaar-log1/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Alex Li</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2025-03-20</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2025-05-14</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Python/">Python</a><a class="link-muted mr-2" rel="tag" href="/tags/Scraper/">Scraper</a><a class="link-muted mr-2" rel="tag" href="/tags/Selenium/">Selenium</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=67edf3b1bc16930012085bcb&amp;product=sop" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">If you hate me, try to keep me alive for longer torment.</h3><div class="buttons is-centered"><a class="button donate" href="https://buymeacoffee.com/greenmeeple" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Prolong my pain</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/projects/mensaar-log2/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">MensaarLecker Development Log (2) -- Web Developing and GitHub Workflow</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/appium/"><span class="level-item">Appium commands that are commonly used on Mac</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card" id="comments"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "8d326f9e9ea55725edbc03afccaa93ec",
            repo: "GreenMeeple.github.io",
            owner: "GreenMeeple",
            clientID: "Ov23ctDlN8NQWlBnA3I9",
            clientSecret: "3fd5f43f975857c90bf68212b56bd6a2aaeff520",
            admin: ["GreenMeeple"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "en",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Motivation"><span class="level-left"><span class="level-item">1</span><span class="level-item">Motivation</span></span></a></li><li><a class="level is-mobile" href="#Developing-Process"><span class="level-left"><span class="level-item">2</span><span class="level-item">Developing Process</span></span></a></li><li><a class="level is-mobile" href="#Web-Scraping"><span class="level-left"><span class="level-item">3</span><span class="level-item">Web Scraping</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Beautiful-Soup"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">Beautiful Soup</span></span></a></li><li><a class="level is-mobile" href="#Selenium"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">Selenium</span></span></a></li><li><a class="level is-mobile" href="#Desired-Data-and-Tags"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">Desired Data and Tags</span></span></a></li><li><a class="level is-mobile" href="#Storage"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">Storage</span></span></a></li><li><a class="level is-mobile" href="#Change-the-time-format"><span class="level-left"><span class="level-item">3.5</span><span class="level-item">Change the time format</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Upload-the-data-to-Google-Sheets"><span class="level-left"><span class="level-item">4</span><span class="level-item">Upload the data to Google Sheets</span></span></a></li><li><a class="level is-mobile" href="#End-of-Scraping"><span class="level-left"><span class="level-item">5</span><span class="level-item">End of Scraping</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><figure class="media-left"><a class="image" href="/python/tgbot/"><img src="/images/tgbot/tgbot_thumbnail.png" alt="python-telegram-bot development experience and notes"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-08T13:03:35.000Z">2025-05-08</time></p><p class="title"><a href="/python/tgbot/">python-telegram-bot development experience and notes</a></p><p class="categories"><a href="/categories/Python/">Python</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/projects/udsfahrplan-bot/"><img src="/images/udsfahrplan/udsfahrplan_thumbnail.png" alt="UdS Fahrplan Bot"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-08T12:04:55.000Z">2025-05-08</time></p><p class="title"><a href="/projects/udsfahrplan-bot/">UdS Fahrplan Bot</a></p><p class="categories"><a href="/categories/Projects/">Projects</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/projects/mensaar/"><img src="/images/mensaar/mensaar_thumbnail.png" alt="🍽 🥨 MensaarLecker -- A beloved tool to find out Mensa Ladies&#039; favourite menu using Selenium🥨 🍽"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-08T03:03:35.000Z">2025-05-08</time></p><p class="title"><a href="/projects/mensaar/">🍽 🥨 MensaarLecker -- A beloved tool to find out Mensa Ladies&#039; favourite menu using Selenium🥨 🍽</a></p><p class="categories"><a href="/categories/Projects/">Projects</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/projects/mensaar-log3/"><img src="/images/mensaar/mensaar_thumbnail.png" alt="MensaarLecker Development Log (3) -- Telegram Bot Deployment and Integration"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-07T13:03:35.000Z">2025-05-07</time></p><p class="title"><a href="/projects/mensaar-log3/">MensaarLecker Development Log (3) -- Telegram Bot Deployment and Integration</a></p><p class="categories"><a href="/categories/Projects/">Projects</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/projects/udsfahrplan-log5/"><img src="/images/udsfahrplan/udsfahrplan_thumbnail.png" alt="UdS Fahrplan Bot Development Log (5) -- Explanations on bot sessions and requests"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-02T23:04:55.000Z">2025-05-03</time></p><p class="title"><a href="/projects/udsfahrplan-log5/">UdS Fahrplan Bot Development Log (5) -- Explanations on bot sessions and requests</a></p><p class="categories"><a href="/categories/Projects/">Projects</a></p></div></article></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Appium/"><span class="level-start"><span class="level-item">Appium</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Git/"><span class="level-start"><span class="level-item">Git</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JavaScript/"><span class="level-start"><span class="level-item">JavaScript</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Notes/"><span class="level-start"><span class="level-item">Notes</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Projects/"><span class="level-start"><span class="level-item">Projects</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/SiteNote/"><span class="level-start"><span class="level-item">SiteNote</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2025/05/"><span class="level-start"><span class="level-item">May 2025</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/04/"><span class="level-start"><span class="level-item">April 2025</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/03/"><span class="level-start"><span class="level-item">March 2025</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/01/"><span class="level-start"><span class="level-item">January 2025</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/12/"><span class="level-start"><span class="level-item">December 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/10/"><span class="level-start"><span class="level-item">October 2024</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/App-Testing/"><span class="tag">App Testing</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Appium/"><span class="tag">Appium</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cantonese/"><span class="tag">Cantonese</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GitHub/"><span class="tag">GitHub</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HAFAS/"><span class="tag">HAFAS</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Latex/"><span class="tag">Latex</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LeetCode/"><span class="tag">LeetCode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mathjax/"><span class="tag">Mathjax</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Node-js/"><span class="tag">Node.js</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/React/"><span class="tag">React</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Scraper/"><span class="tag">Scraper</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Selenium/"><span class="tag">Selenium</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Telegram/"><span class="tag">Telegram</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UdS/"><span class="tag">UdS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hafas/"><span class="tag">hafas</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/json/"><span class="tag">json</span><span class="tag">2</span></a></div></div></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">Advertisement</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5112876356744847" data-ad-slot="f08c47fec0942fa0" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="GreenMeeple" height="28"></a><p class="is-size-7"><span>&copy; 2025 Alex Li</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Personal Note" href="https://greenmeeple.github.io/notes"><i class="fa-solid fa-book"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Personal Blog" href="https://greenmeeple.github.io/SharkDeer"><i class="fa-solid fa-solid fa-blog"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/lib/common.min.js" defer></script><script>
            document.addEventListener("DOMContentLoaded", function() {
                if (window.hljs) hljs.highlightAll();
            });
            </script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js"></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script src="/js/pjax.js"></script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>